# ret_simulations
All code for current RET simulations on T2B

This is a full simulation framework to take you from input parameters to a full corsika shower. Additional steps can be used to calculate the deposition from the shower in scintillators on the ground plane and the fluence of the radio signal from the shower in radio antennas with a bandwidth of your choice. More steps are always being added so if a particular step you want to use isn't documented here contact Rose. 

All code that will need to be run by the user is written in python3. Ensure that the python3 environment is evaluated on the login node before running the code. Without an alternative source, running the command 'python ...' will run the code in a python2 environment and therefore, some fucntionality may not be fully usable.

To obtain the correct python3 environment I use the command:
eval `/cvmfs/icecube.opensciencegrid.org/py3-v4.0.1/setup.sh`

Here we outline a brief work flow of how to create the different input files necessary to run each stage of the simulation.

Directory structure:

~/ret_simulations - main directory for the simulation code

~/ret_simulations/corsika - directory containing all code necessary to write corsika input files, also contains completeness check for corsika simulations run

~/ret_simulations/gdastool - drectory containing all code necessary to write gdastool input files

~/ret_simulations/radio - directory containing all code necessary to write surface radio simulation input files, (including radio triggering code)

~/ret_simulations/surface - directory containing all code necessary to write surface particle simulation input files, including particle triggering code, also contains completeness check for surface particle simulations run

~/ret_simulaitons/HTCondor - directory containing all code necessary to generate and run job submission on the HTCondor system of T2B cluster

~/ret_simulations/HTCondor/corsika - directory containing code and .sh and .submit files to run a corsika job on the T2B cluster

~/ret_simulations/HTCondor/corsika/offset - direcotry containing offset files for corsika simulations detailing the number of corsika simulations that have been generated in input files

~/ret_simulations/HTCondor/gdastool - directory containing code and .sh and .submit files to run a gdastool job on the T2B cluster

~/ret_simulations/HTCondor/radio - directory containing code and .sh and .submit files to run a surface radio job on the T2B cluster

~/ret_simulations/HTCondor/surface - directory containing code and .sh and .submit files to run a surface particle job on the T2B cluster

~/ret_simulations/HTCondor/test - directory containing test .sh and .sumbit files (obsolete)

~/ret_simulations/HTCondor/*/write_dag - directory containing code to write dag files for jobs on the T2B cluster 

~/ret_simulations/HTCondor/*/dagfiles - output directory for all dag files to be run on the T2B cluster, not backed up on git hub due to file number and size, these files are generated by code stored in the ../write_dag directory
